
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>the nullfactory - TFS 2013 - Enabling Reporting, Warehouse and Analysis Services</title>
	<meta name="description" content="the nullfactory">
	<meta name="keywords" content="Team Foundation Server" />

	<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="the nullfactory" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="/stylesheets/base.css" type="text/css" />
	<link rel="stylesheet" href="http://www.nullfactory.net/stylesheets/github.css" type="text/css" />
	<link rel="stylesheet" href="http://www.nullfactory.net/stylesheets/octicons.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="http://www.nullfactory.net/stylesheets/font-awesome/css/font-awesome.min.css" />
	<link href="https://fonts.googleapis.com/css?family=Lato|Open+Sans|Bungee" rel="stylesheet">
	<link rel="canonical" href="http://nullfactory.net/2014/12/tfs-enable-reporting-warehouse-analysis-services/" />
</head>
<body>
  <!-- header -->
	<div class="header-container">
	  <header>
		  <ul class="nav">
			<!--Change the  URL here if working on an absolute domain-->
			<li><a href="http://www.nullfactory.net"><span class="logo">the nullfactory</span></a></li>
			<li><a href="http://www.nullfactory.net/archive"><span style="margin-right: 6px;"></span>archive</a></li>
			<li><a href="http://www.nullfactory.net/about"><span style="margin-right: 6px;"></span>about</a></li>
		  </ul>
	  </header>
	</div>
  <!-- header -->

  <div class="container">
		<div class="listing">
	<div class="post other link">
		<h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2014/12/tfs-enable-reporting-warehouse-analysis-services/">TFS 2013 - Enabling Reporting, Warehouse and Analysis Services</a></h2>
		<p class="post-date">27 Dec 2014
				| <a href="/category/team-foundation-server">Team Foundation Server</a>
	  </p>

		

		<p>Suppose you already have an Team Foundation Server (TFS) environment where you have opted-out from configuring the Reporting Services and Analysis Services during the installation. The following steps would help you to configure the warehouse and reporting functionality.</p>

<h2>Pre-Requisites</h2>

<ol>
<li><p>Ensure that the SQL Server client tools are installed on the Application Tier.</p>

<p>If this is not already done, you would most likely receive a <code>TF400465</code> error when attempting to edit the configuration. <code>TF400465</code> states that client tool are needed to be installed on the application tier in order for the analysis services to function properly.</p>

<p>This can be fixed by re-running the SQL Server setup and adding the <code>Client Tools Connectivity</code> feature <a href="http://msdn.microsoft.com/en-us/library/dd578652.aspx">[Read More]</a>.</p>

<p>Once installed, make sure to restart the TFS administration console.</p></li>
<li><p>Ensure that <code>Management Tools - Complete</code> is installed on at least one of the servers in your topology. This is because SQL Server Management Studio requires the complete version installed in order to manage Analysis Services. This step optional but makes it easy for troubleshooting or future maintenance.</p></li>
<li>Ensure that the Analysis Services have been installed and is up and running.</li>
<li>Ensure SQL Server Reporting Services is installed and configured in native mode <a href="http://msdn.microsoft.com/en-us/library/aa545752%28v=cs.70%29.aspx">[Read More]</a>.</li>
<li>This goes without saying, Analysis Services and Reporting Services are not available on the express version of SQL Server.</li>
</ol>

<!--excerpt-->

<h2>Configuration</h2>

<ol>
<li><p>Navigate to TFS Administration Console <code>Application Tier &gt; Reporting</code>. Notice that the services are not configured.</p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/1_ConsoleUnconfigured.png" alt="" /></p></li>
<li><p>Click <code>Edit</code> to edit the configuration.</p></li>
<li>Check the <code>Use Reporting</code> check box to get started.</li>
<li><p>Configure the warehouse house by first selecting the SQL server from the server list.</p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/2_WarehouseDetails.png" alt="" /></p></li>
<li><p>Next, provide a name for the warehouse database; I gave it <code>Tfs_Warehouse</code> as it is what the latest versions of TFS provides by default.</p></li>
<li>Click <code>Test Connection</code> to ensure the connectivity to the server.</li>
<li><p>Switch over to the <code>Analysis Services</code> tab and select the server for the analysis services from the server list.</p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/3_AnalysisDetails.png" alt="" /></p></li>
<li><p>Provide the database name <code>Tfs_Analysis</code>.</p></li>
<li>Provide the username and password for accessing the data sources.</li>
<li>Click <code>Test Connection</code> to ensure the connectivity to the server.</li>
<li>Next select the <code>Reports</code> tab.</li>
<li><p>Select the report server from the server list.</p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/4_ReportingDetails.png" alt="" /></p></li>
<li><p>Click the <code>Populate URLs</code>. This would retrieve the Web Service and Report Manager urls. In case they are not populated automatically, provide the details manually.</p></li>
<li>Provide the username and password for accessing the data sources.</li>
<li>Click <code>OK</code> to save the settings.</li>
<li><p>Click the <code>Start Jobs</code> to activate the services.</p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/5_ConsoleConfigured.png" alt="" /></p></li>
<li><p>The final step is to rebuild the warehouse. This would prepare the database by building the necessary schema and any pre-requisite operations. This can be achieved in one of the following ways:</p>

<ol>
<li>Executing the <code>RebuildWarehouse</code> command <a href="http://msdn.microsoft.com/en-us/library/ee349264.aspx">[Read More]</a>.</li>
<li>Navigate to the <code>WarehouseControlService</code> webservice and execute <code>ProcessAnalysisDatabase</code> with <code>processingType</code> of <code>Full</code> <a href="http://msdn.microsoft.com/en-us/library/ff400237.aspx">[Read More]</a>.</li>
<li><p>Open up the TFS Administration Console and navigate to <code>Application Tier &gt; Reporting &gt; Start Rebuild</code></p>

<p><img src="/images/posts/TFSEnableReportingAnalysisServices/6_RebuildConfirmation.png" alt="" /></p></li>
</ol></li>
</ol>

<h2>Verification</h2>

<p>Once the <code>RebuildWarehouse</code> command has been executed, verify that the warehouse jobs are running. This can be done by logging onto the application tier and then navigating to the <code>WarehouseControlWebService</code> using the following url and executing the <code>GetProcessingStatus</code> action:</p>

<pre><code>    http://localhost:8080/tfs/TeamFoundation/Administration/v3.0/WarehouseControlService.asmx
</code></pre>

<p>This would return a list of all the jobs that are being executed on the server. The first time I viewed the results, I was a bit overwhelmed by the number of errors shown. If you take a moment and study the errors you realize that these are warnings about SQL locks. Given enough time, and depending on the size of the Project Collections, the errors (warnings) should resolve themselves. As far as I can tell these warnings are expected in a full rebuild.</p>

<h2>References</h2>

<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/aa545752%28v=cs.70%29.aspx">MSDN - How to Configure Reporting Services</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/dd578652.aspx">MSDN - Manually install SQL Server for Team Foundation Server</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ee349264.aspx">MSDN - RebuildWarehouse Command</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ff400237.aspx">MSDN - Manually process the data warehouse and analysis services cube for Team Foundation Server</a></li>
</ul>


	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<div class="addthis_sharing_toolbox"></div>

		<div id="disqus_thread"></div>
<script>
    var reset_disqus = function(){
        DISQUS.reset({
            reload: true,
            config: function () {
                //this.page.identifier = '';
                this.page.url = 'http://nullfactory.net/2014/12/tfs-enable-reporting-warehouse-analysis-services/';
                //this.page.title = '';
            }
        });
    };

    var disqus_shortname = 'thenullfactory';
    var disqus_url = 'http://nullfactory.net/2014/12/tfs-enable-reporting-warehouse-analysis-services/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    window.addEventListener('orientationchange', reset_disqus);
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	</div>

	<!-- Go to www.addthis.com/dashboard to customize your tools -->
	<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53ba83f94ea9c78f" async="async"></script>
</div>
  </div>

  <!-- /.main -->

  <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-57983893-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>

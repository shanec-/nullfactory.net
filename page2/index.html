
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>the nullfactory</title>
	<meta name="description" content="the nullfactory">
	<meta name="keywords" content="ALM,Azure,Azure Storage Accounts,CDN,Code Access Security,commitizen,conventional-changelog,Deployment,Dynamics CRM,Dynamics CRM Online,Entity Framework,generator-nullfactory-xrm,Git,HtmlAgilityPack,Hyper-V,Log4Net,Miscellaneous,Mobile Development,nodejs,npm,Octopus Deploy,PowerShell,REST,Security,SharePoint,SOAP,SQL Server,SQL Server Data Tools,SQL Server Reporting Services,StyleCop,Team Build,Team Foundation Server,TFS Tips,TFSVC,Virtualization,Visual Studio,Visual Studio Team Services,WCF,Windows,Windows Phone,Yeoman" />

	<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="the nullfactory" Feed">
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="http://www.nullfactory.net/stylesheets/base.css" type="text/css" />
	<link rel="stylesheet" href="http://www.nullfactory.net/stylesheets/github.css" type="text/css" />
	<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://www.nullfactory.net/stylesheets/octicons.css" type="text/css" />
  <link rel="stylesheet" type="text/css" href="http://www.nullfactory.net/stylesheets/font-awesome/css/font-awesome.min.css" />
	<link rel="canonical" href="http://nullfactory.net/page2/" />
</head>
<body>
  <!-- header -->

	<div class="header-container">
	  <header>
		  <ul class="nav">
			<!--Change the  URL here if working on an absolute domain-->
			<li><a href="http://www.nullfactory.net"><span class="mega-octicon octicon-terminal" style="margin-right: 6px;"></span>the nullfactory</a></li>
			<li><a href="http://www.nullfactory.net/archive"><span class="mega-octicon octicon-book" style="margin-right: 6px;"></span>archive</a></li>
			<li><a href="http://www.nullfactory.net/about"><span class="mega-octicon octicon-person" style="margin-right: 6px;"></span>about</a></li>
		  </ul>
	  </header>
	</div>

  <!-- header -->

  <div class="container">
	
<header>
  <div class="head-inner">
    <!--<h2>&nbsp;</h2>-->
  </div>
</header>
 <div class="listing">
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-release-part-3/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 3 - Release and Deployment</a></h2>
      <p class="post-date">25 Apr 2017

      | <a href="/category/octopus-deploy" title="Octopus Deploy">Octopus Deploy</a>
      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/git" title="Git">Git</a>
</p>

      <p>
		
		<p>In this third and final installment I cover the steps involved in setting up the minimum release and deployment steps required for a successful Dynamics CRM/365 deployment. The steps and actions performed in the previous posts acts as prerequisites for this one.</p>

<p>Related posts from the series:</p>

<ul>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-setup-part-1/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 1 - Setup</a></li>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-build-part-2/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 2 - Build</a></li>
<li>Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 3 - Release and Deployment</li>
</ul>

<h2>The Packages</h2>

<p>In the <a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-build-part-2/">previous post</a>, I setup the team build to automatically publish packages into the Octopus Deploy package repository. </p>

<p>We can verify that they have indeed been published by navigating to the <code>Library &gt; Packages</code> tab for a list of available packages.</p>

<p><img src="/images/posts/OctoDeployPt3/05_published_package.png" alt="Available Packages" /> </p>

<h2>Defining the Environment</h2>

<p>Environments are a logical grouping of targets / machines used by deployments. For the purpose of this post, I will create one environment - <code>Testing</code> and it would contain a single CRM deployment target - the CRM Server). </p>

<ol>
<li>Let's start off by clicking on the <code>Environments</code> from the main menu to navigate to the environment configuration page.</li>
<li>Click on <code>Add environment</code> in the resulting page.</li>
<li><p>Set <code>Testing</code> as the name of the environment .</p>

<p><img src="/images/posts/OctoDeployPt3/10_create_environment.png" alt="Existing Build Definition" /></p></li>
<li>Click on <code>Save</code> to confirm selection.</li>
</ol>


		<p><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-release-part-3/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-build-part-2/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 2 - Build</a></h2>
      <p class="post-date">24 Apr 2017

      | <a href="/category/octopus-deploy" title="Octopus Deploy">Octopus Deploy</a>
      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/git" title="Git">Git</a>
</p>

      <p>
		
		<p>This is the second part of a series of posts where I attempt to deploy a Dynamics 365/CRM solution using Visual Studio Team Services (VSTS) and Octopus Deploy (OD). Previously, I setup an OD server and integrated it with VSTS - the steps describe in that post act as a prerequisite for this one. In this post we go about modifying an existing Dynamics CRM build definition to automatically package the release-artifact and upload it to the OD server for deployment. </p>

<p>Related posts from the series:</p>

<ul>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-setup-part-1/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 1 - Setup</a> </li>
<li>Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 2 - Build</li>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-release-part-3/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 3 - Release and Deployment</a></li>
</ul>

<h2>Publishing Packages</h2>

<p>There are a few different ways of getting a package into Octopus Deploy:</p>

<ul>
<li>Remotely upload a package to Octopus Deploy's built-in repository.</li>
<li>Make octopus deploy pull packages from an external feed. Find more information <a href="https://www.visualstudio.com/en-us/docs/package/overview">here</a> on setting up VSTS to publish an package feed.</li>
<li>Manually upload the package into the built-in repository.</li>
</ul>

<p>And the method of publishing the package has no bearing on the end deployment -I chose to explicitly push to the remote octopus deploy server. </p>


		<p><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-build-part-2/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-setup-part-1/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 1 - Setup</a></h2>
      <p class="post-date">23 Apr 2017

      | <a href="/category/octopus-deploy" title="Octopus Deploy">Octopus Deploy</a>
      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/git" title="Git">Git</a>
</p>

      <p>
		
		<p>I have seen <a href="https://octopus.com/">Octopus Deploy (OD)</a> being mentioned frequently in the community but haven't had a chance to play around with it myself. Therefore, I think that attempting to deploy a Dynamics 365/CRM solution using Octopus Deploy seemed like the perfect exercise to learn more about the platform and its features.</p>

<p>I was curious if there were other developers who have released Dynamics CRM using Octopus Deploy and sure enough there was some one who had <a href="https://www.youtube.com/watch?v=--9u5azwSb4">already thought of that</a>.</p>

<p>In this series of posts I try to cover everything from setting up integration with Visual Studio Team Services(VSTS), updating a build definition to automatically publish itself and then finally setting up a simple release and deployment pipeline.</p>

<p>Related posts from the series:</p>

<ul>
<li>Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 1 - Setup </li>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-build-part-2/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 2 - Build</a></li>
<li><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-release-part-3/">Deploy Dynamics CRM Solutions using VSTS and Octopus Deploy - Part 3 - Release and Deployment</a></li>
</ul>

<h2>Prerequisites</h2>

<ul>
<li>Project structure and deployment scripts based on <a href="https://www.npmjs.com/package/generator-nullfactory-xrm">generator-nullfactory-xrm</a> (with a minimum version of at least 1.4.0). <a href="/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/">Read More</a></li>
<li>The project checked into Visual Studio Team Services (VSTS) using either <code>git</code> or <code>tfsvc</code> with a working team build already setup. <a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2">Read More</a>.</li>
<li>Installation of Octopus Deploy and ensure sure that it is publicly accessible. <a href="https://www.youtube.com/watch?v=T0BQvMDXPNQ">Read More</a>.</li>
</ul>

<h2>The Strategy</h2>

<p>When I saw the integration tasks provided by the OD extensions for VSTS, my first reaction was to divide the tasks between the build and the release in VSTS. I wanted to the the build definition to build and package the solution and pass it on to release management. Release management would then publishing the release-artifact to OD and explicitly remote trigger the OD deployment.</p>

<p>While it was certainly possible to set this up, its did not make sense to have two deployment services for the same pipeline. Therefore the strategy is going to be very similar to the one that I had done previously - VSTS would continue to act as the version control and build server but this time Octopus deploy would act as the release component.</p>

<p>The build server would handle creating compatible package and uploading it to the OD package repository. And OD takes over the management of the environment, release and deployment complexities.</p>

<p><img src="/images/posts/OctoDeployPt1/05_overview.png" alt="Release Strategy Overview" /></p>


		<p><a href="/2017/04/deploy-dynamics-crm-solutions-vsts-octopus-deploy-setup-part-1/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/version-140-generator-nullfactory-xrm-published/">Version 1.4.0 of generator-nullfactory-xrm Published</a></h2>
      <p class="post-date">18 Apr 2017

      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/yeoman" title="Yeoman">Yeoman</a>
      | <a href="/category/npm" title="npm">npm</a>
      | <a href="/category/nodejs" title="nodejs">nodejs</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
</p>

      <p>
		
		<p>Version <code>1.4.0</code> of the generator released. It includes the following changes:</p>

<ul>
<li>Added support to deploy third-party CRM solutions.</li>
<li>CRM SDK assemblies updated:
<ul>
<li>Microsoft.CrmSdk.CoreTools <code>8.1.0.2</code> => <code>8.2.0.4</code></li>
<li>Microsoft.CrmSdk.CoreAssemblies <code>8.1.0.2</code> => <code>8.2.0.2</code></li>
<li>Microsoft.CrmSdk.Workflow <code>8.1.0.2</code> => <code>8.2.0.2</code></li>
</ul></li>
<li>If opted-in to generate plugins and workflows projects, the generator would automatically create mapping entries in the <code>mapping-xml</code> file. </li>
<li>PowerShell script updates:
<ul>
<li>Better handling of exception and failure flows.</li>
<li><code>*.param.ps1</code> scripts to have high verbosity by default.</li>
<li>Fixed deploy script to have the new solution name. (i.e. <code>ProjectPrefix+SolutionName</code>) </li>
<li>Improved help documentation.</li>
</ul></li>
</ul>


		<p><a href="/2017/04/version-140-generator-nullfactory-xrm-published/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/release-strategy-for-dynamics-crm-deploying-third-party-solutions-part-5/">Release Strategy for Dynamics CRM - Part 5 - Deploy Third-Party Solutions</a></h2>
      <p class="post-date">16 Apr 2017

      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/team-foundation-server" title="Team Foundation Server">Team Foundation Server</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/git" title="Git">Git</a>
</p>

      <p>
		
		<p>More often than not the custom Dynamics 365 solutions I develop depend on third party solutions to provide additional functionality. Therefore these solutions become a pre-requisite to the successful deployment of my own solution. </p>

<p>In this post I go about updating the <a href="/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/">previously setup project</a>, <a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2">build</a> and <a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-release-part-3/">release</a> definitions in Visual Studio Team Services (VSTS) in order to enable deployment of third party CRM solutions.</p>

<h2>Pre-requisites</h2>

<ul>
<li>Project structure and deployment scripts based on <a href="https://www.npmjs.com/package/generator-nullfactory-xrm">generator-nullfactory-xrm</a> (with a minimum version of at least 1.4.0).</li>
<li>A working build and release definitions already setup.</li>
</ul>

<p>Read more about setting up the project structure and build here:</p>

<ul>
<li><a href="/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/">Release Strategy for Dynamics CRM - Part 1 - Preparation</a></li>
<li><a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2">Release Strategy for Dynamics CRM - Part 2 - Setting Up the Build</a></li>
<li><a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-release-part-3/">Release Strategy for Dynamics CRM - Part 3 - Setting Up the Release</a></li>
</ul>

<h2>Project Structure</h2>

<p>I start off by adding a solution level folder to hold third party solutions and  check-in the changes into source control.</p>

<p><img src="/images/posts/CrmReleasePt5/10_structure.png" alt="Project structure" /></p>


		<p><a href="/2017/04/release-strategy-for-dynamics-crm-deploying-third-party-solutions-part-5/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/special-characters-primary-field-breaks-sharepoint-file-upload/">Special Characters in Primary Field Breaks SharePoint File Upload in Dynamics 365</a></h2>
      <p class="post-date">14 Apr 2017

      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
</p>

      <p>
		
		<p>My colleagues and I ran into this confusing issue the other day. We've been working on a Dynamics 365 Online instance integrated with SharePoint (as a server side configuration) and everything seem to be working as expected but for a few records. On these records, anytime the user hits the upload button in document management they are greeted with the following error message instead of the expected upload dialog:</p>

<blockquote>
  <p>An error has occurred. </p>
  
  <p>Try this action again. If the problem continues, check the Microsoft Dynamics 365 Community for solutions or contact your organization's Microsoft Dynamics 365 Administrator. Finally, you can contact Microsoft Support.</p>
</blockquote>

<p><img src="/images/posts/BrokenSharePointInteg/10_error_dialog.png" alt="Upload Error Dialog" /></p>


		<p><a href="/2017/04/special-characters-primary-field-breaks-sharepoint-file-upload/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/04/slide-deck-melbourne-ug/">Source Control and Release Management - Presentation Slide Deck</a></h2>
      <p class="post-date">12 Apr 2017

      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/miscellaneous" title="Miscellaneous">Miscellaneous</a>
</p>

      <p>
		
		<p><img src="/images/posts/MelbUGSlideDeck/10_TypicalLifeCycle.png" alt="Typical Life Cylce Slide" /></p>

<p>A few weeks back, I did a presentation on <code>Source Control and Release Management Strategy for Dynamics 365 Solutions</code> at the Melbourne Dynamics 365 User Group. Here is the slide deck for that presentation:</p>


		<p><a href="/2017/04/slide-deck-melbourne-ug/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2017/02/release-strategy-for-dynamics-crm-versioning-part-4/">Release Strategy for Dynamics CRM - Part 4 - Versioning</a></h2>
      <p class="post-date">07 Feb 2017

      | <a href="/category/dynamics-crm" title="Dynamics CRM">Dynamics CRM</a>
      | <a href="/category/dynamics-crm-online" title="Dynamics CRM Online">Dynamics CRM Online</a>
      | <a href="/category/generator-nullfactory-xrm" title="generator-nullfactory-xrm">generator-nullfactory-xrm</a>
      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/team-foundation-server" title="Team Foundation Server">Team Foundation Server</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/git" title="Git">Git</a>
</p>

      <p>
		
		<p>In this post I detail my approach to implement an automated versioning strategy in CRM solutions and its custom assemblies with the help of Visual Studio Team Services.</p>

<p>Although I originally only intended it to be a 3 part series I think I will continue to add to it as I keep making improvements. To recap, I previously prepared the project structure to host a CRM solution with the aid of the <code>nullfactory-xrm</code> <a href="https://www.npmjs.com/package/generator-nullfactory-xrm">generator</a> and created a build and release definitions for it. You can find the previous posts here:</p>

<ul>
<li><a href="/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/">Release Strategy for Dynamics CRM - Part 1 - Preparation</a></li>
<li><a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2">Release Strategy for Dynamics CRM - Part 2 - Setting Up the Build</a></li>
<li><a href="/2016/11/release-strategy-for-dynamics-crm-setting-up-the-release-part-3/">Release Strategy for Dynamics CRM - Part 3 - Setting Up the Release</a></li>
<li>Release Strategy for Dynamics CRM - Part 4 - Versioning</li>
</ul>

<p>There were two aspects of versioning that I wanted to automatically increment with each release. Firstly the CRM Solution itself and then the custom assemblies included as part of the solution. I also wanted the flexibility to version the two independently of each other (I don't think its a very common scenario, but I would still like to have it as an available option).</p>

<p>As with my previous posts, the instructions in this are specific to Visual Studio Team Services (VSTS), but can be adapted to work with other build and release systems. </p>


		<p><a href="/2017/02/release-strategy-for-dynamics-crm-versioning-part-4/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2016/11/scheduling-the-uptime-of-an-azure-virtual-machine/">Scheduling the Uptime of an Azure Virtual Machine</a></h2>
      <p class="post-date">28 Nov 2016

      | <a href="/category/azure" title="Azure">Azure</a>
</p>

      <p>
		
		<p>In a previous post I setup a <a href="/2016/11/setting-up-a-private-build-agent-in-visual-studio-team-services/">build agent in a private pipeline</a> - hosted within a Azure Virtual Machine (VM). In this one, I try to minimize the uptime of the VM by making it run only during work hours - I require it to start automatically first thing in the morning and then turn itself off at the close of business. In order to achieve this I make use of the <a href="https://azure.microsoft.com/en-au/services/automation/">Azure Automation</a> feature.</p>

<ol>
<li><p>Let's start off by logging into our Azure account and creating a new <code>Automation Account</code> entry. </p>

<p><img src="/images/posts/AzureVmSchedule/10_Automation.png" alt="Search Automation Account" /></p>

<p><img src="/images/posts/AzureVmSchedule/20_CreateAutomation.png" alt="Create Automation Account" /></p></li>
<li><p>Provide the required details:</p>

<ul>
<li><code>Name</code> - Name for the automation account.</li>
<li><code>Subscription</code> - Azure subscription for this account.</li>
<li><code>Resource Group</code> - Create or select an existing resource group from the list. </li>
<li><code>Location</code> - Select an available region from the list.</li>
<li><code>Create Azure Run As account</code> - Select <code>Yes</code>.</li>
</ul>

<p><img src="/images/posts/AzureVmSchedule/30_AddAutomationInfo.png" alt="Add Automation Account" /></p></li>
<li><p>Click the <code>Create</code> button to start provisioning the automation account.</p></li>
<li><p>Once done, navigate to it's blade via the resource groups and click on the <code>Runbooks</code> widget.</p>

<p><img src="/images/posts/AzureVmSchedule/40_CreateRunbook.png" alt="Create runbook" /></p>


		<p><a href="/2016/11/scheduling-the-uptime-of-an-azure-virtual-machine/">Read more...</a></p>
	  </p>
    </div>
    <div class="post other link">
      <h2><span class="mega-octicon octicon-file-text" style="min-width: 32px;"></span><a href="/2016/11/setting-up-a-private-build-agent-in-visual-studio-team-services/">Setting up a Private Build Agent in Visual Studio Team Services</a></h2>
      <p class="post-date">26 Nov 2016

      | <a href="/category/visual-studio-team-services" title="Visual Studio Team Services">Visual Studio Team Services</a>
      | <a href="/category/team-build" title="Team Build">Team Build</a>
      | <a href="/category/alm" title="ALM">ALM</a>
      | <a href="/category/azure" title="Azure">Azure</a>
</p>

      <p>
		
		<p>I've started working on a new hobby project hosted in Visual Studio Team Services (VSTS) and was keen to follow mature build and release practices on it. Given that I am essentially a one man team, I decided to make due with the free tiers. One of the limitations in this tier is the number of CPU cycles available for hosted builds and releases. This means that if I setup all - continuous integration (CI) build, standard build and release definition I am surely going to use up all the available minutes.</p>

<p>The goal was to keep the overall costs low without sacrificing any build and release related automation. Luckily, VSTS allows us to host our own agents on a <a href="https://marketplace.visualstudio.com/items?itemName=ms.build-release-private-pipelines">private pipeline</a>. This seemed the ideal a minimalist setup for me, this looked to be cheaper than having additional <a href="https://marketplace.visualstudio.com/items?itemName=ms.build-release-hosted-pipelines">hosted pipelines</a>. Also worth noting that VSTS currently provides one private pipeline in the free tier with the ability to purchase more private agents (which is slightly cheaper than the hosted).</p>

<p>In this post I go about setting up a virtual machine and then install and configure a build/release agent that can be used by the team builds and releases. </p>

<h2>Provisioning the Virtual Machine</h2>

<ol>
<li>Start off by creating a new resource group dedicated for the build server(s). This is so that we can tie the scheduler to shutdown all agents in a resource group without having to shutdown individual servers.</li>
<li>Next, let's provision a new Windows virtual machine, customize this as you see fit - I used a standard Windows 10 machine. In order to make life easier, I chose a higher tier during your setup with the intention of scaling it down to a lower one once everything is setup.</li>
<li>For this to be a viable build server, I installed the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=42637">.NET 4.5.2 targeting pack</a>. Alternatively, you could install Visual Studio Community Edition or any other dependencies that your particular build might require.</li>
</ol>

<h2>Installing the Agent</h2>

<ol>
<li>Log into the newly provisioned virtual machine.</li>
<li>Next, open a browser and log in to your VSTS instance from within it and navigate to settings page by clicking on the cog icon. Then click the <code>Agent pools</code> sub menu in order to view the list of available agent pools.</li>
<li><p>Click on the <code>Download Agent</code> button and follow the instructions to install the agent.</p>

<p><img src="/images/posts/VstsOnPremAgent/10_DownloadAgent.png" alt="Download agent" /></p>


		<p><a href="/2016/11/setting-up-a-private-build-agent-in-visual-studio-team-services/">Read more...</a></p>
	  </p>
    </div>
</div>

  <div id="post-pagination" class="pagination">


      <p class="previous">
        <a href="/">Previous Page</a>
      </p>


    <p class="previous">
      <a href="/page3">Next Page</a>
    </p>

  </div>

  </div>

  <!-- /.main -->

  <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-57983893-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>

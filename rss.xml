<rss xmlns:a10="http://www.w3.org/2005/Atom" version="2.0"><channel><title>nullfactory.net</title><link>http://nullfactory.net/rss.xml</link><description>nullfactory.net</description><item><guid isPermaLink="true">http://nullfactory.net/2019/03/configuring-rpi-zero-lcd-display-tmux/</guid><link>http://nullfactory.net/2019/03/configuring-rpi-zero-lcd-display-tmux/</link><title>Configuring Raspberry PI Zero + LCD Display + Tmux</title><description>&lt;p&gt;I needed a display for a new project that I am working on and saw that the 3.5 RPI Display Board was on sale and decided to pick one up.  I've previously used mini OLED displays before, but they're pretty limited by its size and the colors that it can display. This is a 480x320 resolution device that is designed to affix right onto the Raspberry Pi (RPi) GPIO pins. The installation is simple as you'd imagine:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/10_final_form.jpg" alt="Connection" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/20_connection.jpg" alt="Connection" /&gt;&lt;/p&gt;

&lt;p&gt;For the project I had in mind, I do not need a fancy GUI nor the use of the touch controller. The display will be used to show console statistics and accessing the device using SSH. &lt;/p&gt;

</description><pubDate>Sat, 16 Mar 2019 13:00:00 Z</pubDate><a10:updated>2019-03-16T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I needed a display for a new project that I am working on and saw that the 3.5 RPI Display Board was on sale and decided to pick one up.  I've previously used mini OLED displays before, but they're pretty limited by its size and the colors that it can display. This is a 480x320 resolution device that is designed to affix right onto the Raspberry Pi (RPi) GPIO pins. The installation is simple as you'd imagine:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/10_final_form.jpg" alt="Connection" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/20_connection.jpg" alt="Connection" /&gt;&lt;/p&gt;

&lt;p&gt;For the project I had in mind, I do not need a fancy GUI nor the use of the touch controller. The display will be used to show console statistics and accessing the device using SSH. &lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h2&gt;Install and Configure LCD Show&lt;/h2&gt;

&lt;p&gt;I am using a vanilla Raspbian lite and no additional drivers were required to get this working. All we need to do is configure some boot scripts and introduce some new configuration files. It's possible to do this &lt;a href="https://www.raspberrypi.org/forums/viewtopic.php?t=143581"&gt;manually&lt;/a&gt;, but thankfully &lt;a href="https://github.com/goodtft/LCD-show"&gt;LCD-Show&lt;/a&gt; automates the process for us.&lt;/p&gt;

&lt;p&gt;Installation of LCD-Show and switching between displays is pretty straight forward:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Clone the repository. &lt;code&gt;git clone https://github.com/goodtft/LCD-show.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Give the new folder execute permission. &lt;code&gt;chmod -R 755 LCD-show&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;For my version of the display I need to use the LCD 35 version of the file. Run the &lt;code&gt;LCD35-show&lt;/code&gt; script.&lt;/li&gt;
&lt;li&gt;Reboot the Pi using &lt;code&gt;sudo shutdown -r now&lt;/code&gt; or &lt;code&gt;sudo reboot&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Upon reboot the LCD panel should be your primary display. &lt;/p&gt;

&lt;p&gt;It would have been nice if I could have mirrored the HDMI output and the LCD panel at the same time, but I could not figure out how to do this or if it was possible at all. &lt;/p&gt;

&lt;p&gt;In order to flip back to HDMI as the primary, execute the &lt;code&gt;LCD-hdmi&lt;/code&gt; script and reboot to take effect.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/30_panel.jpg" alt="Connection" /&gt;&lt;/p&gt;

&lt;h2&gt;Automatic Login&lt;/h2&gt;

&lt;p&gt;In order to show console of my program on screen we need to login as a user and I want this to happen  automatically at boot time. &lt;/p&gt;

&lt;p&gt;I followed the instructions in &lt;a href="https://unix.stackexchange.com/a/401798"&gt;this post&lt;/a&gt; in order to configure auto login on boot:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Edit the &lt;code&gt;/etc/systemd/logind.conf&lt;/code&gt; file and uncomment the &lt;code&gt;#NAutoVTs=6&lt;/code&gt; line to &lt;code&gt;NAutoVTs=1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a new file at &lt;code&gt;/etc/systemd/system/getty@tty1.service.d/override.conf&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add the following content:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin appsvcuser --noclear %I 38400 linux`
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Replace the &lt;code&gt;autologin&lt;/code&gt; parameter value with the user you would like to login. In my scenario there is no possibility to physically access and compromise the device, even then I would recommend to use an account with the least amount of privileged to accomplish your tasks.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Start the &lt;code&gt;getty@tty1.service&lt;/code&gt; service using &lt;code&gt;systemctl enable getty@tty1.service&lt;/code&gt; command.&lt;/li&gt;
&lt;li&gt;Reboot using &lt;code&gt;sudo shutdown -r now&lt;/code&gt; or &lt;code&gt;sudo reboot&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Configure Tmux&lt;/h2&gt;

&lt;p&gt;I initially attempted to configure it using &lt;a href="https://kerpanic.wordpress.com/2017/03/30/loading-tmux-on-boot-in-linux/"&gt;this approach&lt;/a&gt;, but quickly realised that it would not work for my requirement as there is no user logged into the console. If there's no one logged in then there's shown on screen.&lt;/p&gt;

&lt;p&gt;My solution is to use terminal multiplexer like &lt;a href="https://medium.com/@tholex/what-is-tmux-and-why-would-you-want-it-for-frontend-development-e43e8f370ef2"&gt;Tmux&lt;/a&gt;. Among its many useful features, there are a couple of that I am interested in. The first being the fact that a SSH session initiated via Tmux does not terminate upon user disconnection and all your processes continue to run in the background. &lt;/p&gt;

&lt;p&gt;Secondly, it allows a remote user to connect to an existing SSH session. If I were to kick off a Tmux session on user log on, I am be able to connect to the same session from a remote computer. This means that I should connect to the session that is being shown on the physical display and interact with it as if I was seated in front of it.&lt;/p&gt;

&lt;p&gt;I updated the&lt;code&gt;~/.bashrc&lt;/code&gt; of the &lt;code&gt;appsvcuser&lt;/code&gt; in order to &lt;a href="https://wiki.archlinux.org/index.php/tmux#Autostart_tmux_with_default_tmux_layout"&gt;launch Tmux on logon&lt;/a&gt;. I also used the technique described on &lt;a href="https://superuser.com/a/863940"&gt;this post&lt;/a&gt;  to make sure that only one instance of Tmux always running at a given time.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Login as the execution account - &lt;code&gt;appsvcuser&lt;/code&gt; in my example.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo nano ~/.bashrc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Scroll all the way to the bottom of the file and paste the following block of text:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;if [[ `tty` == "/dev/tty1" ]] &amp;amp;&amp;amp; [[ -z "$TMUX" ]];then 
        tmux new -s "nfx"                              
fi                                                     
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Connecting to the Tmux session:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Remote into the RPi via SSH.&lt;/li&gt;
&lt;li&gt;Use the &lt;code&gt;tmux ls&lt;/code&gt; command to get a list of all the sessions running in the background.&lt;/li&gt;
&lt;li&gt;The connect to the running session &lt;code&gt;tmux a -t nfx&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/RpiLcdTmux/40_ssh_connectivity.png" alt="Connection" /&gt;&lt;/p&gt;

&lt;h2&gt;Final Thoughts&lt;/h2&gt;

&lt;p&gt;Right now the display is on all the time, I would need to figure out a way to timeout or turn it off manually.&lt;/p&gt;

&lt;p&gt;The LCD is compatible with both the Raspberry PI Zero and its big brother variants so these same instructions can be applied to get them both running.&lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/goodtft/LCD-show"&gt;GitHub - goodtft/LCD-show: 2.4" 2.8"3.2" 3.5" 5.0" 7.0" TFT LCD driver for the Raspberry PI 3B+/A/A+/B/B+/PI2/ PI3/ZERO/ZERO W&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://unix.stackexchange.com/a/401798"&gt;Automatically Login on Debian 9.2.1 Command Line - Unix &amp;amp; Linux Stack Exchange&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kerpanic.wordpress.com/2017/03/30/loading-tmux-on-boot-in-linux/"&gt;Loading tmux on Boot in Linux â€“ Kernel Panic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/tmux#Autostart_tmux_with_default_tmux_layout"&gt;tmux - ArchWiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/getty"&gt;getty - ArchWiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.githubusercontent.com/afair/3489752/raw/e7106ac93c8f9602d3843696692a87cfb43c2d21/tmux.cheat"&gt;tmux cheat sheet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.raspberrypi.org/forums/viewtopic.php?t=143581"&gt;XPT2046 Touch Screen instructions for Raspbery Pi 3 - Raspberry Pi Forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.jeffgeerling.com/blog/2016/review-elecrow-hdmi-5-800x480-tft-display-xpt2046-touch-controller"&gt;Calibirating the touch screen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2018/06/generator-nullfactory-xrm-1-7-0-released/</guid><link>http://nullfactory.net/2018/06/generator-nullfactory-xrm-1-7-0-released/</link><title>generator-nullfactory-xrm 1.7.0 Released!</title><description>&lt;p&gt;I just &lt;a href="https://www.npmjs.com/package/generator-nullfactory-xrm"&gt;released&lt;/a&gt; version &lt;code&gt;1.7.0&lt;/code&gt; of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. This release includes a lot of defect fixes, dependency version upgrades and refactored code.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Feature #37: Added ability to upgrade tooling PowerShell scripts via the generator.
&lt;ul&gt;
&lt;li&gt;Run &lt;code&gt;yo nullfactory-xrml:tooling&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Feature #12: The generated *.csproj files now have unique identifiers. This should avoid any potential conflict between projects.&lt;/li&gt;
&lt;li&gt;Feature #35: .gitignore file updated to be compatible with nested "standard project structure". (see https://gist.github.com/davidfowl/ed7564297c61fe9ab814).&lt;/li&gt;
&lt;li&gt;Fixed #34: Pull-CrmSolution.ps1 now downloads the zip file to a temporary file location before extraction.&lt;/li&gt;
&lt;li&gt;Fixed #36: &lt;code&gt;solution&lt;/code&gt; sub-generator now creates mapping file as expected.&lt;/li&gt;
&lt;li&gt;Updated plugin and workflow project dependencies:
&lt;ul&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreAssemblies - &lt;code&gt;9.0.0.7&lt;/code&gt; ==&gt; &lt;code&gt;9.0.2.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.Worklow - &lt;code&gt;9.0.0.7&lt;/code&gt; ==&gt; &lt;code&gt;9.0.2.3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Refactored the internal structure of the generator.&lt;/li&gt;
&lt;li&gt;Refreshed package dependencies.&lt;/li&gt;
&lt;li&gt;Fixed broken unit tests.&lt;/li&gt;
&lt;/ul&gt;

</description><pubDate>Sun, 17 Jun 2018 14:00:00 Z</pubDate><a10:updated>2018-06-17T14:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I just &lt;a href="https://www.npmjs.com/package/generator-nullfactory-xrm"&gt;released&lt;/a&gt; version &lt;code&gt;1.7.0&lt;/code&gt; of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. This release includes a lot of defect fixes, dependency version upgrades and refactored code.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Feature #37: Added ability to upgrade tooling PowerShell scripts via the generator.
&lt;ul&gt;
&lt;li&gt;Run &lt;code&gt;yo nullfactory-xrml:tooling&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Feature #12: The generated *.csproj files now have unique identifiers. This should avoid any potential conflict between projects.&lt;/li&gt;
&lt;li&gt;Feature #35: .gitignore file updated to be compatible with nested "standard project structure". (see https://gist.github.com/davidfowl/ed7564297c61fe9ab814).&lt;/li&gt;
&lt;li&gt;Fixed #34: Pull-CrmSolution.ps1 now downloads the zip file to a temporary file location before extraction.&lt;/li&gt;
&lt;li&gt;Fixed #36: &lt;code&gt;solution&lt;/code&gt; sub-generator now creates mapping file as expected.&lt;/li&gt;
&lt;li&gt;Updated plugin and workflow project dependencies:
&lt;ul&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreAssemblies - &lt;code&gt;9.0.0.7&lt;/code&gt; ==&gt; &lt;code&gt;9.0.2.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.Worklow - &lt;code&gt;9.0.0.7&lt;/code&gt; ==&gt; &lt;code&gt;9.0.2.3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Refactored the internal structure of the generator.&lt;/li&gt;
&lt;li&gt;Refreshed package dependencies.&lt;/li&gt;
&lt;li&gt;Fixed broken unit tests.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;Please feel free to submit any feature requests or issues found to &lt;a href="https://github.com/shanec-/generator-nullfactory-xrm/issues"&gt;https://github.com/shanec-/generator-nullfactory-xrm/issues&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Read more about the Dynamics 365 release strategy and how everything fits together:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/"&gt;Release Strategy for Dynamics CRM - Part 1 - Preparation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2"&gt;Release Strategy for Dynamics CRM - Part 2 - Setting Up the Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/11/release-strategy-for-dynamics-crm-setting-up-the-release-part-3/"&gt;Release Strategy for Dynamics CRM - Part 3 - Setting Up the Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2017/02/release-strategy-for-dynamics-crm-versioning-part-4/"&gt;Release Strategy for Dynamics CRM - Part 4 - Versioning&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2018/03/yaml-build-support-for-generator-nullfactory-xrm/</guid><link>http://nullfactory.net/2018/03/yaml-build-support-for-generator-nullfactory-xrm/</link><title>YAML Build Support for generator-nullfactory-xrm</title><description>&lt;p&gt;If you've read my previous posts on the topic, you might have already guessed that I am a big fan of maintaining builds as code artefacts. I was super excited when the Visual Studio Team Services (VSTS) team announced YAML support and I knew right then that this had to be part of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;With version &lt;code&gt;1.6.0&lt;/code&gt;, I've added the ability to generate tailored YAML build definitions into your Dynamics 365 projects. What this means is that you get rich CI build support right out of the gate! No more excuses for not having a CI build in your project!&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildGeneratorSupport/hero.jpg" alt="CI Builds for Everyone" /&gt;&lt;/p&gt;

&lt;p&gt;The option to generate a CI build is defined as a sub-generator. This is intentional as I didn't want to automatically assume that everyone would be using VSTS as their source control.&lt;/p&gt;

&lt;p&gt;Here's the quick rundown of the steps necessary to get things up and running. What we're aiming for is a layered approach:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;First generate the default project structure.&lt;/li&gt;
&lt;li&gt;Next, generate the YML file using a sub-generator.&lt;/li&gt;
&lt;li&gt;Push changes to remote VSTS &lt;code&gt;git&lt;/code&gt; repository.&lt;/li&gt;
&lt;li&gt;Verify that VSTS provisioned the YML file as the CI build.&lt;/li&gt;
&lt;li&gt;... &lt;/li&gt;
&lt;li&gt;Profit!&lt;/li&gt;
&lt;/ol&gt;

</description><pubDate>Fri, 02 Mar 2018 13:00:00 Z</pubDate><a10:updated>2018-03-02T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;If you've read my previous posts on the topic, you might have already guessed that I am a big fan of maintaining builds as code artefacts. I was super excited when the Visual Studio Team Services (VSTS) team announced YAML support and I knew right then that this had to be part of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;With version &lt;code&gt;1.6.0&lt;/code&gt;, I've added the ability to generate tailored YAML build definitions into your Dynamics 365 projects. What this means is that you get rich CI build support right out of the gate! No more excuses for not having a CI build in your project!&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildGeneratorSupport/hero.jpg" alt="CI Builds for Everyone" /&gt;&lt;/p&gt;

&lt;p&gt;The option to generate a CI build is defined as a sub-generator. This is intentional as I didn't want to automatically assume that everyone would be using VSTS as their source control.&lt;/p&gt;

&lt;p&gt;Here's the quick rundown of the steps necessary to get things up and running. What we're aiming for is a layered approach:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;First generate the default project structure.&lt;/li&gt;
&lt;li&gt;Next, generate the YML file using a sub-generator.&lt;/li&gt;
&lt;li&gt;Push changes to remote VSTS &lt;code&gt;git&lt;/code&gt; repository.&lt;/li&gt;
&lt;li&gt;Verify that VSTS provisioned the YML file as the CI build.&lt;/li&gt;
&lt;li&gt;... &lt;/li&gt;
&lt;li&gt;Profit!&lt;/li&gt;
&lt;/ol&gt;

&lt;!--excerpt--&gt;

&lt;h2&gt;Prerequisites&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Opt-in to the preview build feature in VSTS. &lt;a href="http://nullfactory.net/2018/01/build-pipeline-as-code-yaml-based-ci-build-for-dynamics-365-solutions/"&gt;Read my previous post&lt;/a&gt; on how to do this.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Fair warning that as of writing this post, the YAML builds feature within VSTS is still in preview. While very unlikely, there's always the possibility that things might break due to future change.&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A &lt;code&gt;git&lt;/code&gt; based repository in VSTS - YAML builds only work with git repositories.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;The Setup&lt;/h2&gt;

&lt;p&gt;Assumption that nullfactory-xrm generator and &lt;a href="http://yeoman.io/"&gt;Yeoman&lt;/a&gt; itself has alredy been installed on the client computer being worked on and that a Dynamics CRM solution is ready to be synced.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Setup the project using &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt; using the default generator. &lt;a href="http://nullfactory.net/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/"&gt;Read this post&lt;/a&gt; for more detail steps.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yo nullfactory-xrm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildGeneratorSupport/10_defaultgenerator.png" alt="Default Generator" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, run the generator once more from the same folder location, and this time let's use the &lt;code&gt;cibuild&lt;/code&gt; sub-generator:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yo nullfactory-xrm:cibuild
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Provide the same solution name you provided in step 1. And choose &lt;code&gt;Visual Studio Team Services&lt;/code&gt; as the type of source control being used.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildGeneratorSupport/20_generatecibuild.png" alt="Default Generator" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This would have generated a file called &lt;code&gt;.vsts-ci.yml&lt;/code&gt;. And that's it - once your changes are checked in and pushed to VSTS, the YML file would be automatically provisioned as the default CI build.&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2018/03/generator-nullfactory-xrm-1-6-0-released/</guid><link>http://nullfactory.net/2018/03/generator-nullfactory-xrm-1-6-0-released/</link><title>generator-nullfactory-xrm 1.6.0 Released!</title><description>&lt;p&gt;I just &lt;a href="https://www.npmjs.com/package/generator-nullfactory-xrm"&gt;released&lt;/a&gt; version &lt;code&gt;1.6.0&lt;/code&gt; of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. This release includes the following changes:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/generator160/hero.png" alt="generator-nullfactory-xrm" /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;V9 Support!&lt;/li&gt;
&lt;li&gt;Simplified post installation steps with the introduction of &lt;code&gt;_RunFirst.ps1&lt;/code&gt; script.&lt;/li&gt;
&lt;li&gt;Generate VSTS compatible YML build file:
&lt;ul&gt;
&lt;li&gt;Added &lt;code&gt;nullfactory-xrm:cibuild&lt;/code&gt; sub-command.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Generate individual CRM project file post initial scaffolding:
&lt;ul&gt;
&lt;li&gt;Added &lt;code&gt;nullfactory-xrm:solution&lt;/code&gt; sub-command. &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Default generator creates a tailored &lt;code&gt;README.md&lt;/code&gt; file with a summary of changes.&lt;/li&gt;
&lt;li&gt;Fixed issue with generated workflow template code.&lt;/li&gt;
&lt;li&gt;CRM SDK assemblies updated:
&lt;ul&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreTools &lt;code&gt;8.2.0.4&lt;/code&gt; =&gt; &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreAssemblies &lt;code&gt;8.1.0.2&lt;/code&gt; =&gt; &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.Workflow &lt;code&gt;8.1.0.2&lt;/code&gt; =&gt;  &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Added (Beta) version of the Online Management API scripts.&lt;/li&gt;
&lt;/ul&gt;

</description><pubDate>Wed, 28 Feb 2018 13:00:00 Z</pubDate><a10:updated>2018-02-28T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I just &lt;a href="https://www.npmjs.com/package/generator-nullfactory-xrm"&gt;released&lt;/a&gt; version &lt;code&gt;1.6.0&lt;/code&gt; of &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;. This release includes the following changes:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/generator160/hero.png" alt="generator-nullfactory-xrm" /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;V9 Support!&lt;/li&gt;
&lt;li&gt;Simplified post installation steps with the introduction of &lt;code&gt;_RunFirst.ps1&lt;/code&gt; script.&lt;/li&gt;
&lt;li&gt;Generate VSTS compatible YML build file:
&lt;ul&gt;
&lt;li&gt;Added &lt;code&gt;nullfactory-xrm:cibuild&lt;/code&gt; sub-command.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Generate individual CRM project file post initial scaffolding:
&lt;ul&gt;
&lt;li&gt;Added &lt;code&gt;nullfactory-xrm:solution&lt;/code&gt; sub-command. &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Default generator creates a tailored &lt;code&gt;README.md&lt;/code&gt; file with a summary of changes.&lt;/li&gt;
&lt;li&gt;Fixed issue with generated workflow template code.&lt;/li&gt;
&lt;li&gt;CRM SDK assemblies updated:
&lt;ul&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreTools &lt;code&gt;8.2.0.4&lt;/code&gt; =&gt; &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.CoreAssemblies &lt;code&gt;8.1.0.2&lt;/code&gt; =&gt; &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Microsoft.CrmSdk.Workflow &lt;code&gt;8.1.0.2&lt;/code&gt; =&gt;  &lt;code&gt;9.0.0.7&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Added (Beta) version of the Online Management API scripts.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;Please feel free to submit any feature requests or issues found to &lt;a href="https://github.com/shanec-/generator-nullfactory-xrm/issues"&gt;https://github.com/shanec-/generator-nullfactory-xrm/issues&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Read more about the Dynamics 365 release strategy and how everything fits together:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/"&gt;Release Strategy for Dynamics CRM - Part 1 - Preparation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2"&gt;Release Strategy for Dynamics CRM - Part 2 - Setting Up the Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/11/release-strategy-for-dynamics-crm-setting-up-the-release-part-3/"&gt;Release Strategy for Dynamics CRM - Part 3 - Setting Up the Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2017/02/release-strategy-for-dynamics-crm-versioning-part-4/"&gt;Release Strategy for Dynamics CRM - Part 4 - Versioning&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2018/02/yaml-builds-and-branches-visual-studio-team-services/</guid><link>http://nullfactory.net/2018/02/yaml-builds-and-branches-visual-studio-team-services/</link><title>YAML Builds and Branching in Visual Studio Team Services</title><description>&lt;p&gt;In my previous post I explored the the concept of treating build as a first class code citizen and how to automatically setup up an YAML based continuous integration (CI) build in Visual Studio Team Services (VSTS). &lt;/p&gt;

&lt;p&gt;At the end of that exercise I was curious as to how VSTS handles build definitions when you throw branching into the mix. I could not find much information on the topic, so I thought I might try it out myself.&lt;/p&gt;

&lt;h2&gt;Branches and CI Builds&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Prepare the project structure place the you build definition &lt;code&gt;.vsts-ci.yml&lt;/code&gt; in the root of the repository. Read &lt;a href="http://nullfactory.net/2018/01/build-pipeline-as-code-yaml-based-ci-build-for-dynamics-365-solutions/"&gt;my previous post&lt;/a&gt; for setting up an exported CI build.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add an echo step so we can uniquely identify this build branch.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/5_TriggeredEchoMaster.png" alt="Triggered Echo" /&gt;&lt;/p&gt;

</description><pubDate>Sat, 17 Feb 2018 13:00:00 Z</pubDate><a10:updated>2018-02-17T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;In my previous post I explored the the concept of treating build as a first class code citizen and how to automatically setup up an YAML based continuous integration (CI) build in Visual Studio Team Services (VSTS). &lt;/p&gt;

&lt;p&gt;At the end of that exercise I was curious as to how VSTS handles build definitions when you throw branching into the mix. I could not find much information on the topic, so I thought I might try it out myself.&lt;/p&gt;

&lt;h2&gt;Branches and CI Builds&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Prepare the project structure place the you build definition &lt;code&gt;.vsts-ci.yml&lt;/code&gt; in the root of the repository. Read &lt;a href="http://nullfactory.net/2018/01/build-pipeline-as-code-yaml-based-ci-build-for-dynamics-365-solutions/"&gt;my previous post&lt;/a&gt; for setting up an exported CI build.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add an echo step so we can uniquely identify this build branch.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/5_TriggeredEchoMaster.png" alt="Triggered Echo" /&gt;&lt;/p&gt;

&lt;!--excerpt--&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Commit changes to the &lt;code&gt;master&lt;/code&gt; branch and push it to the remote repository.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verify that VSTS picked up the build and provisioned the CI build as expected. And that it triggered an initial build.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/10_BuildProvisioned.png" alt="Build Provisioned" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verify that our echo statement worked.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/15_BuildEchoStatement.png" alt="Build Echo Statement" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now let's update the build trigger to include all feature branches we create. Edit the build definition and navigate to the triggers tab add the following branch filter: &lt;code&gt;features/*&lt;/code&gt;. This means that the build would trigger on each of the &lt;code&gt;feature/&lt;/code&gt; topic branches.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/20_EditBuildDefinition.png" alt="Edit Build Definition" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Navigate to the triggers tab and add a new branch filter.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/30_AddBranchFilter.png" alt="Add Branch Filter" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Save the changes.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, create a new topic branch and switch to it. I am going to call it &lt;code&gt;features/complex-feature1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;â€‹    &lt;code&gt;git checkout -b 'features/complex-feature1'&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Push the new branch to the remote server.&lt;/p&gt;

&lt;p&gt;â€‹ &lt;code&gt;git push -u origin 'features/complex-feature1'&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verify that the build definition got triggered against the new branch.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/40_BranchBuildTriggered.png" alt="Branch triggered on New Branch" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now let's make a change to the &lt;code&gt;.vsts-ci.yml&lt;/code&gt;. In order to keep things simple, I am just going to update the echo statement with the branch name.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/50_UpdatedEcho.png" alt="Branch triggered on New Branch" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Once again, let's commit and push the changes to the remote server.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Verify that a new build was triggered.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/60_UpdatedBuildTriggered.png" alt="Updated Build Trigger" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Confirm that the branch specific version of the build was executed.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/70_BranchBuild.png" alt="Branch triggered on New Branch" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This confirms that VSTS honors and executes the appropriate build definitions on the appropriate branch. Super cool!&lt;/p&gt;

&lt;h2&gt;Final Thoughts&lt;/h2&gt;

&lt;p&gt;The ability to branch build definitions gives team members the ability to customize and test build changes in isolation. It also minimizes the disruption to on going development until the changes are ready to be merged and shared with the rest of the team.&lt;/p&gt;

&lt;h3&gt;Path Filters&lt;/h3&gt;

&lt;p&gt;It doesn't seem to be possible to setup path filters from the YAML file. That being said, it can still be setup by editing the build definition after the provisioning. &lt;/p&gt;

&lt;p&gt;This can be done by navigate to the &lt;code&gt;Triggers&lt;/code&gt; tab in the build definition and adding the path filter.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/80_PathFilter.png" alt="Path Filters" /&gt;&lt;/p&gt;

&lt;p&gt;In the above example, I want to make sure that the CI build does not trigger when I make changes to the support tools. &lt;/p&gt;

&lt;h3&gt;Scheduling Builds&lt;/h3&gt;

&lt;p&gt;Schedule builds also needs to be setup in a similar fashion to path filters. &lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/90_BuildSchedule.png" alt="Build Schedule" /&gt;&lt;/p&gt;

&lt;h3&gt;Multiple Build Definitions and Manual Setup&lt;/h3&gt;

&lt;p&gt;What happens when you have multiple &lt;code&gt;yml&lt;/code&gt; files within a single repository? I hadn't even considered this until I stumble across it in the documentation. &lt;/p&gt;

&lt;p&gt;Consider an example where the project already contains your wired up CI build but you'd like to use the second dedicated build for your production releases. &lt;/p&gt;

&lt;p&gt;This is certainly possible - if VSTS finds a a file named &lt;code&gt;.vsts-ci.yml&lt;/code&gt; in the root path then it attempts to wire it up as a CI &lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml#automatically-create-a-yaml-build-definition"&gt;build automatically&lt;/a&gt;, but the additional builds needs to be &lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml#manually-create-a-yaml-build-definition"&gt;setup manually&lt;/a&gt;. &lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Start by creating a new build definition from within VSTS and choose &lt;code&gt;YAML&lt;/code&gt; as the template. Confirm the selection by clicking the &lt;code&gt;Apply&lt;/code&gt; button.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/100_NewBuildTemplate.png" alt="Build Schedule" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, click the ellipsis button &lt;code&gt;...&lt;/code&gt; and select the path to the YAML file and click &lt;code&gt;OK&lt;/code&gt; to confirm.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/110_ProdBuild.png" alt="Build Schedule" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Once saved, you can trigger the build as you would any other.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I can also confirm that VSTS treats YAML builds as regular builds and they can be used as the source for your release definitions.&lt;/p&gt;

&lt;h3&gt;Change Tracking&lt;/h3&gt;

&lt;p&gt;So the changes YAML file itself is tracked by &lt;code&gt;git&lt;/code&gt;, but does VSTS track the changes we do to the build definition after provisioning? Yes, it does. Under the covers, it looks like VSTS sets up an json-exportable definition of the build. This is not a replication of your &lt;code&gt;YAML&lt;/code&gt; build tasks, but rather maintains everything thats &lt;strong&gt;not&lt;/strong&gt; configurable in the &lt;code&gt;YAML&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;A history of all changes done to the definition can be viewed and compared from the history tab.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YamlBuildBranch/120_BuildHistory.png" alt="Build History" /&gt;&lt;/p&gt;

&lt;p&gt;I, for one, have become a fan of YAML builds and can't wait for this feature to come out of preview and become a permanent.&lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/ci-build-git"&gt;Define a CI build process for your Git repo | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml"&gt;CI Build in code using YAML | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-gb/vsts/build-release/concepts/definitions/build/variables?tabs=batch"&gt;Build variables | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/build/triggers"&gt;Build definition triggers | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml#automatically-create-a-yaml-build-definition"&gt;CI Build in code using YAML - Automatic Build Definition| Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml#manually-create-a-yaml-build-definition"&gt;CI Build in code using YAML - Manual Build Definition| Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2018/01/build-pipeline-as-code-yaml-based-ci-build-for-dynamics-365-solutions/</guid><link>http://nullfactory.net/2018/01/build-pipeline-as-code-yaml-based-ci-build-for-dynamics-365-solutions/</link><title>Build Pipeline as Code - YAML based CI Build for Dynamics 365 Solutions</title><description>&lt;p&gt;I first learned about YAML builds a while back when I was trying into integrate a project with AppVeyor. The concept of treating your build pipeline as first class code artefact was very appealing as it opens up so much possibilities. For me personally the highlights are: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;History, versioning and branching of your build definitions&lt;/li&gt;
&lt;li&gt;Improve quality of build definitions and consistency across projects.&lt;/li&gt;
&lt;li&gt;Quickly reuse and repurpose builds onto different projects.&lt;/li&gt;
&lt;li&gt;Make maximum use of the underlying build platform.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These posts &lt;a href="https://blog.kloud.com.au/2017/11/26/vsts-build-definitions-as-yaml-part-1-what-and-why/"&gt;here&lt;/a&gt; and &lt;a href="https://www.marcusfelling.com/blog/2017/vsts-yaml-builds/"&gt;here&lt;/a&gt; dive deeper into the advantages and the different use cases.  &lt;/p&gt;

&lt;p&gt;A couple of months ago the Visual Studio Team Service (VSTS) team &lt;a href="https://blogs.msdn.microsoft.com/devops/2017/11/15/pipeline-as-code-yaml-preview/"&gt;announced&lt;/a&gt; support for the the same functionality in VSTS. Although the feature is still in preview, the VSTS team has continued to improve the feature and now provides the ability to export existing build definitions or individual tasks. In this post, I intend to take pre-existing build definition, converting it to a YAML build definition and make the necessary changes to get it to work as a CI build. &lt;/p&gt;

&lt;p&gt;In this post, I intend to port an existing definition to a YAML build definition and use it as a template to setup a new CI build for a second project. The source definition that I will be using is a basic version I use for Dynamics 365 projects. &lt;/p&gt;

</description><pubDate>Fri, 19 Jan 2018 13:00:00 Z</pubDate><a10:updated>2018-01-19T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I first learned about YAML builds a while back when I was trying into integrate a project with AppVeyor. The concept of treating your build pipeline as first class code artefact was very appealing as it opens up so much possibilities. For me personally the highlights are: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;History, versioning and branching of your build definitions&lt;/li&gt;
&lt;li&gt;Improve quality of build definitions and consistency across projects.&lt;/li&gt;
&lt;li&gt;Quickly reuse and repurpose builds onto different projects.&lt;/li&gt;
&lt;li&gt;Make maximum use of the underlying build platform.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These posts &lt;a href="https://blog.kloud.com.au/2017/11/26/vsts-build-definitions-as-yaml-part-1-what-and-why/"&gt;here&lt;/a&gt; and &lt;a href="https://www.marcusfelling.com/blog/2017/vsts-yaml-builds/"&gt;here&lt;/a&gt; dive deeper into the advantages and the different use cases.  &lt;/p&gt;

&lt;p&gt;A couple of months ago the Visual Studio Team Service (VSTS) team &lt;a href="https://blogs.msdn.microsoft.com/devops/2017/11/15/pipeline-as-code-yaml-preview/"&gt;announced&lt;/a&gt; support for the the same functionality in VSTS. Although the feature is still in preview, the VSTS team has continued to improve the feature and now provides the ability to export existing build definitions or individual tasks. In this post, I intend to take pre-existing build definition, converting it to a YAML build definition and make the necessary changes to get it to work as a CI build. &lt;/p&gt;

&lt;p&gt;In this post, I intend to port an existing definition to a YAML build definition and use it as a template to setup a new CI build for a second project. The source definition that I will be using is a basic version I use for Dynamics 365 projects. &lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h2&gt;Prerequisites&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Visual Studio Team Services account with a &lt;code&gt;git&lt;/code&gt; repository. &lt;code&gt;tfsvc&lt;/code&gt; repositories are &lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml"&gt;not supported&lt;/a&gt; at the time of writing this post.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Dynamics 365 solution prepared using the &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt;  and then checked into the above &lt;code&gt;git&lt;/code&gt; repository.&lt;/p&gt;

&lt;p&gt;The following posts provide instructions in setting up the prerequisite project structure:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/10/release-strategy-for-dynamics-crm-prepping-part-1/"&gt;Release Strategy for Dynamics CRM - Part 1 - Preparation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nullfactory.net/2016/11/release-strategy-for-dynamics-crm-setting-up-the-build-part-2"&gt;Release Strategy for Dynamics CRM - Part 2 - Setting Up the Build&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An pre-setup build definition that successfully builds the code in the repository. &lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;The Setup&lt;/h2&gt;

&lt;h3&gt;Enable Preview Features&lt;/h3&gt;

&lt;p&gt;As YAML build definitions are still in preview , users need to opt-in to the feature. Let's do this now:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Log-in to you VSTS instance with an Account Administrator. &amp;lt;&lt;reference back to the article showing the permission required&gt;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Click on the Logged-in user profile picture. And click on the &lt;code&gt;Preview features&lt;/code&gt; in the resulting menu. This will will open up the &lt;code&gt;Preview features&lt;/code&gt; drawer.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/10_EnablePreview.png" alt="Enable Preview" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In the first drop down make sure that the &lt;code&gt;for this account [your-account-name]&lt;/code&gt; is selected.  Next, turn on the &lt;code&gt;Build YAML definitions&lt;/code&gt; feature. &amp;lt;&amp;lt;&gt;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/20_EnablePreviewDrawer.png" alt="Enable Preview Drawer" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;Export the Build Definition&lt;/h3&gt;

&lt;p&gt;Now let's navigate to our build definition that we're going to be using as the source template.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Navigate to your build using the menu &lt;code&gt;Build and Release &amp;gt; Build&lt;/code&gt; and selecting the &lt;code&gt;Definitions&lt;/code&gt; tab.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Click the ellipsis on the build definition and select &lt;code&gt;Edit...&lt;/code&gt; from the context menu.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/30_EditBuildDef.png" alt="Edit Build Definition" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/40_ExistingBuild.png" alt="Existing Build Definition" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Note that this build definition uses a &lt;code&gt;MSBuild&lt;/code&gt; task instead of a &lt;code&gt;Visual Studio Build&lt;/code&gt; as such does not require the &lt;code&gt;visualstudio&lt;/code&gt; demand.&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If not already selected, click on the &lt;code&gt;Process- Build process&lt;/code&gt; option.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/44_ExistingBuildProcessStep.png" alt="View YAML Build" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Note the &lt;code&gt;View YAML&lt;/code&gt; link to the far right of the editor. Click on it to open a popup showing a generated YAML definition.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/50_ViewYAML.png" alt="View YAML Build" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/60_BuildExport.png" alt="Export Build" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;For reference, I've uploaded the generated file &lt;a href="http://nullfactory.net/images/posts/YAMLBuild/vsts_generated.yml"&gt;here&lt;/a&gt;. &lt;/p&gt;

&lt;h3&gt;Clean Up&lt;/h3&gt;

&lt;p&gt;The next step is to clean up and fix the exported script. The generation process identified some warnings and errors for us, so let's start with those. In this particular instance they were all related to variables not being defined:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!-- snip --&amp;gt;

#Your build definition references an undefined variable named â€˜Parameters.solutionâ€™. Create or edit the build definition for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972
#Your build definition references the â€˜BuildPlatformâ€™ variable, which youâ€™ve selected to be settable at queue time. Create or edit the build definition for this YAML file, define the variable on the Variables tab, and then select the option to make it settable at queue time. See https://go.microsoft.com/fwlink/?linkid=865971

&amp;lt;!-- snip --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following variables were found to be undefined:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Parameters.solution&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;build.sourcesdirectory&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;build.artifactstagingdirectory&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And the following were identified as being set when the build is queued:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BuildPlatform&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BuildConfiguration&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The errors related to the variables prefixed with &lt;code&gt;build.&lt;/code&gt; are not a problem and can be safely ignored. They are predefined variables and are indeed &lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/build/variables?tabs=batch"&gt;available in the build environment&lt;/a&gt;.  &lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Create a new PowerShell task that defines the variables and move it to the first in the order. Next set the &lt;code&gt;BuildConfiguration&lt;/code&gt; and &lt;code&gt;BuildPlatform&lt;/code&gt; was to &lt;code&gt;release&lt;/code&gt; and &lt;code&gt;any cpu&lt;/code&gt; respectively. And finally &lt;code&gt;Parameters.Solution&lt;/code&gt; to the actual solution being built - as this example contains only one solution file, set it to &lt;code&gt;**/*.sln&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;steps:
- powershell: |
    Write-Host '##vso[task.setvariable variable=BuildConfiguration;]release'
    Write-Host '##vso[task.setvariable variable=BuildPlatform;]any cpu'
    Write-Host '##vso[task.setvariable variable=Parameters.solution;]**/*.sln'
  displayName: Create variables
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, escape any slashes in task attribute values. I had to update &lt;code&gt;VSTest@2&lt;/code&gt; and &lt;code&gt;CopyFiles@2&lt;/code&gt; tasks.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;- task: VSTest@2
  inputs:
    testAssemblyVer2: "**\\$(BuildConfiguration)\\*test*.dll
!**\\obj\\**"
    platform: "$(BuildPlatform)"
    configuration: "$(BuildConfiguration)"


- task: CopyFiles@2
  inputs:
    SourceFolder: "$(build.sourcesdirectory)"
    Contents: "**\\bin\\$(BuildConfiguration)\\**"
    TargetFolder: "$(build.artifactstagingdirectory)"
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add a &lt;code&gt;displayName&lt;/code&gt; node for each of the tasks - this does not have an impact on the operation of the build itself, but makes it easier to keep track of the tasks being executed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!-- snip --&amp;gt;
- task: NuGetCommand@2
  displayName: NuGet restore **\*.sln
&amp;lt;!-- snip --&amp;gt;
- task: MSBuild@1
  displayName: Build solution **/*.sln
&amp;lt;!-- snip --&amp;gt;
- task: CopyFiles@2
  displayName: "Copy Files to: $(build.artifactstagingdirectory)"
&amp;lt;!-- snip --&amp;gt;
- task: CopyFiles@2
  displayName: "Copy Deployment Scripts to: $(build.artifactstagingdirectory)"
&amp;lt;!-- snip --&amp;gt;
- task: DeleteFiles@1
  displayName: "Delete custom assemblies from $(build.artifactstagingdirectory)"
&amp;lt;!-- snip --&amp;gt;
- task: PublishBuildArtifacts@1
  displayName: "Publish Artifact: drop"
&amp;lt;!-- snip --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And we're done. Download the final form of the file &lt;a href="http://nullfactory.net/images/posts/YAMLBuild/updated_definition.yml"&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h3&gt;Deployment&lt;/h3&gt;

&lt;p&gt;The deployment process itself is very simple, all we need to do is create a &lt;code&gt;.vsts-ci.yml&lt;/code&gt; and drop it in the root of your repository and VSTS would automatically generate the CI build.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Save the cleaned up build definition with the name of &lt;code&gt;.vsts-ci.yml&lt;/code&gt; and drop it in the root folder of your second project repository.&lt;/li&gt;
&lt;li&gt;Commit your changes and push them to remote.&lt;/li&gt;
&lt;li&gt;Within VSTS, navigate to the &lt;code&gt;Build and Release&lt;/code&gt; and ensure that there is a new folder with the repository's name.&lt;/li&gt;
&lt;li&gt;Navigate into this folder and verify that a new build has been created &lt;code&gt;your_repo_name CI&lt;/code&gt;and that it is currently in progress.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And that's it, you've got a working CI build.&lt;/p&gt;

&lt;h2&gt;Final Thoughts&lt;/h2&gt;

&lt;h3&gt;Reusing Definition for Dynamics 365&lt;/h3&gt;

&lt;p&gt;Thanks to the use of the yeoman generator, my Dynamics 365 projects use an identical project structure. This mean that I can just copy the &lt;code&gt;.vsts-ci.yml&lt;/code&gt; to the root of repository of the new project, make any project specific changes if necessary and you've got a working CI build.&lt;/p&gt;

&lt;h3&gt;Branching Behaviour&lt;/h3&gt;

&lt;p&gt;I was curious to find out what happens when we branch the YAML build. Does VSTS create a new instance of the definition for each of the branches? Look out for it's blog post.&lt;/p&gt;

&lt;h3&gt;Defining Variables via the UI&lt;/h3&gt;

&lt;p&gt;As an alternative to defining the variables using a PowerShell or Shell a task, they can also be defined using the VSTS user interface.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Skip the previous step where we initialize the variables using the PowerShell task. Continue on with the other steps.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Check-in and push the CI build to remote.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Navigate to the &lt;code&gt;Build and Release&lt;/code&gt; menu and &lt;code&gt;Build&lt;/code&gt; tab and verify that a new build was provisioned as expected.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;The initial check-in of the CI build itself is going to fail as it will be triggered the moment the build definition is provisioned.&lt;/em&gt; &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, &lt;code&gt;Edit&lt;/code&gt; the definition and navigate to the &lt;code&gt;Variables&lt;/code&gt; tab.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Define the &lt;code&gt;BuildConfiguration&lt;/code&gt;, &lt;code&gt;BuildPlatform&lt;/code&gt;, &lt;code&gt;Parameters.solution&lt;/code&gt; variables:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/70_AltSetVariables.png" alt="Set Process Variables" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Test out your new definition by making a change to the repository or explicitly triggering a new build.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The downside of this method is that all the components required by the build definition is not contained within the YAML file. &lt;/p&gt;

&lt;p&gt;So why would I want to take this approach?  Secrets. This is the perfect way to store your secrets and avoid inadvertently checking them into your repository.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/YAMLBuild/80_SecretVariable.png" alt="Secret Process Variables" /&gt;&lt;/p&gt;

&lt;p&gt;Therefore I would recommend using an hybrid approach. Should your CI build require the use of sensitive information, define them via the UI and place the rest of the variables in the script itself.&lt;/p&gt;

&lt;h3&gt;Alternative Approaches&lt;/h3&gt;

&lt;p&gt;I've noticed that different vendors and tend to have their own flavour of what a YAML build file format would look like. Unfortunately, this means that if a development team was to ever to switch build providers or fork a copy of the project to another build platform, they would likely need to rework or add platform specific build scripts.&lt;/p&gt;

&lt;p&gt;One approach I have seen, especially in OSS projects, is to use a platform agnostic script (PowerShell / Shell) that can be used to build your application in isolation and setup the CI build task to make a call to this script. You still get a lot of the advantages mentioned previously, but forego the tight integration and features of a particular build systems.&lt;/p&gt;

&lt;h3&gt;Next Steps&lt;/h3&gt;

&lt;p&gt;Since most of the teams I work with use VSTS exclusively, I was super stoked when this announcement was made. This feature is a perfect candidate to be included as part of the &lt;code&gt;generator-nullfactory-xrm&lt;/code&gt; yeoman  generator as it removes the manual steps and further reduces the time it takes to setup a CI pipeline within VSTS.&lt;/p&gt;

&lt;p&gt;The next release of the generator will include the ability to generate a tailored CI build for VSTS with the I hopes of adding other providers in the future. It's will be implemented as a sub-generator and would needed be opted into. &lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://blog.kloud.com.au/2017/11/26/vsts-build-definitions-as-yaml-part-1-what-and-why/"&gt;VSTS Build Definitions as YAML Part 1: What and Why? | Kloud Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.marcusfelling.com/blog/2017/vsts-yaml-builds/"&gt;VSTS YAML Builds (Pipeline as code) - Marcus Felling&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blogs.msdn.microsoft.com/devops/2017/11/15/pipeline-as-code-yaml-preview/"&gt;Pipeline as code (YAML) preview â€“ Microsoft DevOps Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.kloud.com.au/2017/11/26/vsts-build-definitions-as-yaml-part-2-how/"&gt;VSTS Build Definitions as YAML Part 2: How? | Kloud Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.visualstudio.com/en-us/docs/build/concepts/process/phases"&gt;Build and Release Automation Phases in VSTS and TFS | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/actions/build-yaml"&gt;CI Build in code using YAML | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/_shared/set-variables-in-scripts?tabs=powershell"&gt;Define and modify your variables in a script | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Microsoft/vsts-agent/blob/master/docs/preview/yamlgettingstarted-powershell.md"&gt;vsts-agent/yamlgettingstarted-powershell.md at master Â· Microsoft/vsts-agent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://chamindac.blogspot.com.au/2017/11/build-definition-as-code-with-yaml.html"&gt;Chaminda's Blog: Build Definition as Code with YAML Builds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Microsoft/vsts-agent/blob/master/.vsts.ci.yml"&gt;vsts-agent/.vsts.ci.yml at master Â· Microsoft/vsts-agent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/build/variables?tabs=batch"&gt;Build variables | Microsoft Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.motowilliams.com/vsts-yaml-build-definitions"&gt;Eric Williams - VSTS: YAML Build Definitions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mattvsts.blogspot.com.au/2017/11/yaml-build-definitions-in-team-build.html"&gt;Matt's ALM space: YAML Build Definitions in the Team Build, now what?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2017/10/crm-saturday-melbourne-2017-presentation-slide-deck/</guid><link>http://nullfactory.net/2017/10/crm-saturday-melbourne-2017-presentation-slide-deck/</link><title>CRM Saturday Melbourne 2017 - Presentation Slide Deck</title><description>&lt;p&gt;&lt;a href="https://www.slideshare.net/shanec_/zero-to-devops-source-control-release-strategy-crm-saturday-2017"&gt;&lt;img src="http://nullfactory.net/images/posts/CrmSatSlideDeck/crm-sat-slide-deck.png" alt="CRM Saturday Melbourne 2017" /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I know its a "little" late, but here's the slide deck from my CRM Saturday 2017 presentation  - &lt;code&gt;Zero to DevOps - Source Control and Release Strategy for Dynamics 365 Solutions&lt;/code&gt;. &lt;/p&gt;

</description><pubDate>Sun, 08 Oct 2017 13:00:00 Z</pubDate><a10:updated>2017-10-08T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;&lt;a href="https://www.slideshare.net/shanec_/zero-to-devops-source-control-release-strategy-crm-saturday-2017"&gt;&lt;img src="http://nullfactory.net/images/posts/CrmSatSlideDeck/crm-sat-slide-deck.png" alt="CRM Saturday Melbourne 2017" /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I know its a "little" late, but here's the slide deck from my CRM Saturday 2017 presentation  - &lt;code&gt;Zero to DevOps - Source Control and Release Strategy for Dynamics 365 Solutions&lt;/code&gt;. &lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;&lt;a href="https://www.slideshare.net/shanec_/zero-to-devops-source-control-release-strategy-crm-saturday-2017"&gt;https://www.slideshare.net/shanec_/zero-to-devops-source-control-release-strategy-crm-saturday-2017&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As always, feel free to reach me through social media if you have any questions.&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2017/10/dont-forget-to-install-the-just-in-time-debugger/</guid><link>http://nullfactory.net/2017/10/dont-forget-to-install-the-just-in-time-debugger/</link><title>Don't Forget to Install the Just-In-Time Debugger</title><description>&lt;p&gt;Today I learned that you can have an installation of Visual Studio 2017 without the JIT debugger - Yup, you really can.  This meant that I could not use the technique of attaching a debugger at runtime using the  &lt;code&gt;System.Diagnostics.Debugger.Launch();&lt;/code&gt; code snippet. &lt;/p&gt;

&lt;p&gt;When the application executes the launch code, nothing happens - no error nor exception. The method even returns &lt;code&gt;true&lt;/code&gt; indicating a a successful launch.&lt;/p&gt;

</description><pubDate>Sat, 07 Oct 2017 13:00:00 Z</pubDate><a10:updated>2017-10-07T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Today I learned that you can have an installation of Visual Studio 2017 without the JIT debugger - Yup, you really can.  This meant that I could not use the technique of attaching a debugger at runtime using the  &lt;code&gt;System.Diagnostics.Debugger.Launch();&lt;/code&gt; code snippet. &lt;/p&gt;

&lt;p&gt;When the application executes the launch code, nothing happens - no error nor exception. The method even returns &lt;code&gt;true&lt;/code&gt; indicating a a successful launch.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;After equal parts of scouring the web and pulling my hair out, I eventually stumbled upon the following option in the Visual Studio setup:&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/JITDebugger/10_installdebugger.png" alt="Install Debugger" /&gt;&lt;/p&gt;

&lt;p&gt;The combination of features selected had somehow unchecked the Just-In-Time debugger. Heck, I didn't even know you could &lt;strong&gt;&lt;em&gt;not&lt;/em&gt;&lt;/strong&gt; install it. I hope this helps someone else out there.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/JITDebugger/20_choosejitdebugger.png" alt="Choose Debugger" /&gt;&lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch(v=vs.110).aspx"&gt;Debugger.Launch Method (System.Diagnostics)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://defragdev.com/blog/?p=668"&gt;The wonders of Debugger.Launch() | Mark's Devblog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blogs.msdn.microsoft.com/mapo/2013/11/07/debugger-launch-not-displaying-jit-debugger-selection-popup-on-windows-88-1/"&gt;Debugger.Launch() not displaying JIT debugger selection popup on Windows 8/8.1 â€“ Scattered Notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/12655965/debugger-launch-not-working"&gt;c# - Debugger.Launch not working - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/9a539c40-1869-44b8-9aed-9f9d7d402d7c/mysterious-vs-jit-debugger-invocation-failure?forum=vsdebug"&gt;Mysterious VS JIT debugger invocation failure&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2017/10/tail-using-powershell/</guid><link>http://nullfactory.net/2017/10/tail-using-powershell/</link><title>Tail using PowerShell</title><description>&lt;p&gt;Consider a scenario where you are diagnosing an issue on a production server. You've enabled the logs and got everything setup to reproduce the issue. Queue the trigger to invoke the misbehaving operation and finally wait for the log file to update.&lt;/p&gt;

&lt;p&gt;Staring at the log file size to change is no fun nor is refreshing the file periodically. I want to be notified the moment the log gets updated in real-time. This is exactly what a program like &lt;a href="https://en.wikipedia.org/wiki/Tail_(Unix)"&gt;&lt;code&gt;tail&lt;/code&gt;&lt;/a&gt; does - it monitors the file for changes and outputs the &lt;em&gt;tail&lt;/em&gt; end of the file.&lt;/p&gt;

&lt;p&gt;There are a few incarnations of tail out there that do the job perfectly fine, but given that this was a production environment I was not keep about installing new tools.&lt;/p&gt;

&lt;p&gt;Luckily, the &lt;code&gt;Get-Content&lt;/code&gt; PowerShell cmdlet has this functionality built-in. This is the combo that I finally settled on:&lt;/p&gt;

</description><pubDate>Fri, 06 Oct 2017 13:00:00 Z</pubDate><a10:updated>2017-10-06T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Consider a scenario where you are diagnosing an issue on a production server. You've enabled the logs and got everything setup to reproduce the issue. Queue the trigger to invoke the misbehaving operation and finally wait for the log file to update.&lt;/p&gt;

&lt;p&gt;Staring at the log file size to change is no fun nor is refreshing the file periodically. I want to be notified the moment the log gets updated in real-time. This is exactly what a program like &lt;a href="https://en.wikipedia.org/wiki/Tail_(Unix)"&gt;&lt;code&gt;tail&lt;/code&gt;&lt;/a&gt; does - it monitors the file for changes and outputs the &lt;em&gt;tail&lt;/em&gt; end of the file.&lt;/p&gt;

&lt;p&gt;There are a few incarnations of tail out there that do the job perfectly fine, but given that this was a production environment I was not keep about installing new tools.&lt;/p&gt;

&lt;p&gt;Luckily, the &lt;code&gt;Get-Content&lt;/code&gt; PowerShell cmdlet has this functionality built-in. This is the combo that I finally settled on:&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;&lt;code&gt;Get-Content log.txt -tail 5 -wait&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;-tail&lt;/code&gt; argument takes in the number of lines to show from the end of the file and &lt;code&gt;-wait&lt;/code&gt; specifies that  it should continue to monitor the file.&lt;/p&gt;

&lt;p&gt;Granted that this method does not have highlighting capabilities that a dedicated tool would have, but its a pretty useful option to have in a pinch.&lt;/p&gt;

&lt;p&gt;Finally, save a few key strokes by using the alias:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cat log.txt -tail 5 -wait&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Update 2019-01-30:&lt;/em&gt; I recently had the requirement to monitor a file for some text and then note the timestamp of when it was written. It is based off of &lt;a href="https://blogs.technet.microsoft.com/rmilne/2016/06/03/powershell-tail-command/#comment-90245"&gt;this suggested solution&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;cat .\processed-users.txt -tail 5 -wait | ? { $_ -like '&lt;em&gt;SEARCH_STRING_HERE&lt;/em&gt;' } | % { Write-Host $(Get-Date -Format T) -noNewLine -ForegroundColor Blue; Write-Host " $_"   }&lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/187587/looking-for-a-windows-equivalent-of-the-unix-tail-command"&gt;Looking for a windows equivalent of the unix tail command - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackify.com/13-ways-to-tail-a-log-file-on-windows-unix/"&gt;13 Ways to Tail a Log File on Windows &amp;amp; Linux: Top Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Management/Get-Content?view=powershell-5.1"&gt;Microsoft Docs - Get-Content&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blogs.technet.microsoft.com/rmilne/2016/06/03/powershell-tail-command/#comment-90245"&gt;PowerShell Tail Command â€“ 250 Hello&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item><item><guid isPermaLink="true">http://nullfactory.net/2017/10/mocking-and-testing-a-webservice-using-soapui/</guid><link>http://nullfactory.net/2017/10/mocking-and-testing-a-webservice-using-soapui/</link><title>Mocking and Testing a WebService using SoapUI</title><description>&lt;p&gt;I have recently been working on an implementation of a WCF client interacts with a remote SOAP web service. Unfortunately this service did not have a development version that I could interactively test my requests against.&lt;/p&gt;

&lt;p&gt;Armed with just the WSDL and the schema for expected responses, I needed to find a way to mock the remote service in order to confirm the functionality of the client. This is where SOAP UI comes in - SOAP UI is tool that allows me to point it to service contract (WSDL or REST) and mock the responses that each of the actions would generate. And finally provides the functionality to host and serve these mocked responses so that they can be consumed by different clients.&lt;/p&gt;

&lt;p&gt;I will be using the freely available &lt;a href="http://www.webservicex.net/globalweather.asmx"&gt;http://www.webservicex.net/globalweather.asmx&lt;/a&gt; web service to demonstrate the process.&lt;/p&gt;

</description><pubDate>Thu, 05 Oct 2017 13:00:00 Z</pubDate><a10:updated>2017-10-05T13:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I have recently been working on an implementation of a WCF client interacts with a remote SOAP web service. Unfortunately this service did not have a development version that I could interactively test my requests against.&lt;/p&gt;

&lt;p&gt;Armed with just the WSDL and the schema for expected responses, I needed to find a way to mock the remote service in order to confirm the functionality of the client. This is where SOAP UI comes in - SOAP UI is tool that allows me to point it to service contract (WSDL or REST) and mock the responses that each of the actions would generate. And finally provides the functionality to host and serve these mocked responses so that they can be consumed by different clients.&lt;/p&gt;

&lt;p&gt;I will be using the freely available &lt;a href="http://www.webservicex.net/globalweather.asmx"&gt;http://www.webservicex.net/globalweather.asmx&lt;/a&gt; web service to demonstrate the process.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;Let's start off with a single request:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Open up the SOAP UI application and add connection to the SOAP service. Do this by navigating to the &lt;code&gt;File &amp;gt; New SOAP Project&lt;/code&gt; menu option.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Provide a name for the project and set the url to the WSDL file to &lt;a href="http://www.webservicex.net/globalweather.asmx?wsdl"&gt;http://www.webservicex.net/globalweather.asmx?wsdl&lt;/a&gt; . Keep the &lt;code&gt;Create Requests&lt;/code&gt; check box checked: &lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/10_AddNewSoapProject.png" alt="Add new SOAP project" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now let's create a mock version of our web service. Right click on the &lt;code&gt;GetCitiesByCountry&lt;/code&gt; method and select &lt;code&gt;Add to MockService&lt;/code&gt; option in the context menu.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/20_AddToMockService.png" alt="Add to mock service" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Provide it with a name, and select &lt;code&gt;Yes&lt;/code&gt; to open it within the editor.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/30_EnterNameForService.png" alt="Enter name for service" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/40_OpenMockServiceEditor.png" alt="Open mock service editor" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In the resulting dialog, paste the response you would like to receive when a request is made.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/50_MockedResponse.png" alt="Mocked response" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now that we have the response setup, let's start up the mock service to serve up our requests. Do this by double clicking the &lt;code&gt;WeatherMockService&lt;/code&gt; node to bring up the service status dialog and clicking on the &lt;code&gt;Start&lt;/code&gt; (play icon) button.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/70_MockingServiceStarted.png" alt="Mocking service started" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now let's see if our response works. The easiest way to do this is to right-click on the response that we previously populated, and on the context-menu select the &lt;code&gt;Open Request&lt;/code&gt; option.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/75_MockServiceTest.png" alt="Mocking service test" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Either select the pre-generated request, or select the option to create a new one. &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Modify the resulting request as necessary. &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Once ready, click the submit (play icon) button to send the request.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/78_MockServiceTestResult.png" alt="Mocking service test result" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Confirm that you have received the previously setup request.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now we have very basic mock and responses working, let's make it a little bit more complex. In my live system, any time the service method is called it would reply with a different response subject to some external variables. I wanted to mock the same functionality so that I can better test how my client code reacts to the different sequences. &lt;/p&gt;

&lt;p&gt;I did a bit of research and found another individual who had the same requirement: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/32975240/soapui-mock-service-custom-sequence-of-responses"&gt;https://stackoverflow.com/questions/32975240/soapui-mock-service-custom-sequence-of-responses&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This approach allows us to orchestrate the responses that are returned. In this particular example there are no smarts built in apart from the service responding to the requests in sequence.&lt;/p&gt;

&lt;p&gt;Let's setup our sequence of responses:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Create a second response for the request. &lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/80_MockSecondResponse.png" alt="Mock second response" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Provide it with a new response body as done previously.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/90_MockSecondResponseBody.png" alt="Mock second response body" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Next, right-click on the &lt;code&gt;GetCitiesByCountry&lt;/code&gt; method in the mock service and select &lt;code&gt;Show MockOperation Editor&lt;/code&gt; in the resulting dialog.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/100_MockOperationEditor.png" alt="Mock operation editor" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In the resulting dialog,  choose the &lt;code&gt;SEQUENCE&lt;/code&gt; as the &lt;code&gt;Dispatch&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/110_ScriptEditor.png" alt="Sciprt editor" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Paste the following script in the script section. This script controls the order in which the responses are returned. Update the &lt;code&gt;myRespList&lt;/code&gt; array to change this sequence.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// get the list from the context
def myRespList = context.myRespList


// if list is null or empty reinitalize it
if(!myRespList || !myRespList?.size){   
    // list in the desired output order using the response names that your
    // create in your mockservice
    myRespList = ["Response 2","Response 1"]  
}
// take the first element from the list
def resp = myRespList.take(1)[0]


// update the context with the list without this element
context.myRespList = myRespList.drop(1)


// return the response
log.info "--&amp;gt;"+resp
return resp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/120_FinalScript.png" alt="Final script" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Test out the response by clicking on the test script (play button) just above the editor. SOAP UI responds with showing us the first request that would be sent.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/140_ScriptTestRun2.png" alt="Script returned response 2" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Testing the script again, and receive the second response. Good, the script seems to be doing its job.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/130_ScriptTestRun1.png" alt="Script returned response 1" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Let's do one final test with an actual request to make sure its working as expected. &lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/160_RequestSecondRun.png" alt="Request first run" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And run the request again to receive the second response.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://nullfactory.net/images/posts/MockSoapUI/150_RequestFirstRun.png" alt="Request second run" /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;Final Thoughts&lt;/h2&gt;

&lt;p&gt;I love the fact that this tool provides the right combination of ease of use and functionality. And allows a new developer to quickly setup the basics and then extend the test scenarios as they become more complex.&lt;/p&gt;

&lt;p&gt;This is going into my developer tool belt for sure.&lt;/p&gt;

&lt;h2&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.soapui.org/getting-started/your-first-soapui-project.html"&gt;Your First SoapUI Project | Getting started with SoapUI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.soapui.org/getting-started/10-tips-for-the-soapui-beginner.html"&gt;10 Tips for the SoapUI Beginner | Getting started with SoapUI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/32975240/soapui-mock-service-custom-sequence-of-responses"&gt;groovy - SoapUI Mock Service Custom Sequence of Responses - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</a10:content></item></channel></rss>